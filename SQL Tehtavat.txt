06.11.2018

Työskentely Company-tietokannan kanssa. Jos olet tehnyt tämän jo tunnilla, niin voit siirtyä suoraan tekemään tehtäviä.

1. Avaa tuubista tiedosto "Company DB and Data MariaDB.txt"
2. Avaa selaimesta linkki: users.metropolia.fi/phpMyAdmin
3. Valitse kaikki avaamastasi tekstitiedostosta ja kopioi se leikepöydälle
4. Sijoita tekstisi tietokantaan (SQL-lomake + Sijoita + Suorita)

===

Esimerkit:
1. Valitse kaikki esimiehet (supervisors)

SELECT
 s.lname Supervisor
FROM
 employee e,
 employee s
WHERE
 e.supervisor = s.ssn;

Esittääksesi esimiehet vain kerran, käytä määritettä DISTINCT:

SELECT DISTINCT
 s.lname Supervisor
FROM
 employee e,
 employee s
WHERE
 e.supervisor = s.ssn;

======

Tehtävät:

===

1. Valitse kaikki osastot

SELECT * FROM department d;

===

2. Valitse työntekijät ja esitä niistä etunimi ja sukunimi

SELECT
 e.lname,
 e.fname 
FROM 
 employee e;

===

3. Valitse kaikkien työntekijöiden nimet ja osastot, joilla he työskentelevät

SELECT
 d.dname Osasto,
 e.lname Työntekijä,
 e.fname

FROM
 employee e,
 department d

WHERE
 e.deptno = d.dno;

===

4. Valitse kaikkien päälliköiden (manager) nimet ja osastot, joilla he työskentelevät

SELECT
 d.dname,
 e.fname,
 e.lname

FROM
 employee e,
 department d

WHERE
 e.ssn = d.manager;

===

5. Laske kunkin osaston työntekijöiden lukumäärä

SELECT
 d.dname Osasto,
 COUNT(e.ssn) 'Työntekijöiden lkm'

FROM
 employee e INNER JOIN
  department d ON e.deptno = d.dno

GROUP BY
 d.dname;

===

6. Valitse kaikki projektit, jotka ohjataan Hankinta (Purchase)-osastolla

SELECT
 d.dname,
 p.pname
FROM
 department d,
 project p
WHERE
 d.dno = '10' AND d.dno =  p.deptno;
 

===

7. Valitse kaikki esimiehet (supervisor) osastoittain (???)

SELECT
 d.dname,
 e.fname,
 e.lname

FROM
 employee e,
 department d

WHERE
 e.ssn = d.manager
 
ORDER BY
 d.dname;

===

8. Valitse kaikki Tampereella olevat projektit ja lajittele ne ohjaavan osaston mukaan

SELECT
 p.pname,
 d.dname

FROM
 project p,
 department d

WHERE
 p.location = '2'
 
ORDER BY
 p.deptno;


===

9. Laske yhteenlasketut tunnit projekteittain

SELECT SUM
 w.hours

FROM
 w.works_on

WHERE
 w.proj_no = '100';


===

10. Laske yksikköhinta: työtunnit / projekti osastoittain
    
===

11. Valitse työntekijöt osastoittain ja esitä ne  ikäjärjestyksessä

===

12. Laske kaksosten tekemät työtunnit projekteittain

===

13. Valitse vanhin esimies

===

14. Valitse kaikki riippuvuussuhteessa olevat (dependents) ja ne, joilla on sisar (Vinkki: käytä OUTER JOIN:ia)

===
